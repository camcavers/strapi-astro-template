---
import Layout from '../layouts/Layout.astro';
import Post from '../components/Post.astro';
import { fetchPosts } from '../lib/api';

// Add console.log for debugging
console.log('Fetching posts...');
const posts = await fetchPosts();
console.log('Posts fetched:', posts);
---

<Layout title="Blog">
  <div class="container">
    <header class="page-header">
      <h1>Latest Posts</h1>
    </header>
    
    <div class="row">
      {posts.map((post) => (
        <div>
          <h2>{post.title}</h2>
          <p>{post.excerpt}</p>
          <!-- Access other fields directly without 'attributes' -->
        </div>
      ))}
    </div>
  </div>
</Layout>

<style>
  .page-header {
    margin-bottom: 3rem;
  }
</style>